# v0.1.2 更新日誌

**發布日期**: 2025-01-20

## 📦 重大變更

### 停用多視窗功能
- 暫時停用「新增便利貼視窗」功能
- 專案回到單一主視窗模式
- 相關程式碼已註解保留，供未來參考

## 🔧 功能調整

### 系統托盤
- **移除**: 「新增便利貼視窗」選單項目
- **保留**: 「顯示便條」和「退出」選單

### 視窗管理
- **簡化**: 只保留主視窗 (`main`)
- **移除**: 啟動時恢復便利貼視窗的邏輯
- **移除**: 便利貼視窗的 UI 調整邏輯

### 前端邏輯
- **簡化**: 移除視窗類型判斷（`isSticky`）
- **簡化**: 移除便利貼視窗的配色和內容管理
- **簡化**: 統一使用主視窗的儲存邏輯

## ✅ 保留功能

### 核心功能（完全正常）
- ✅ 主視窗筆記編輯
- ✅ 新增便條（"+" 按鈕）
- ✅ 歷史記錄管理
- ✅ 封存功能
- ✅ 垃圾桶功能
- ✅ 圖片插入（貼上與拖放）
- ✅ 圖片調整大小與刪除
- ✅ 網址自動轉換為連結
- ✅ 配色主題切換
- ✅ 透明度調整
- ✅ 字體設定
- ✅ 全域快捷鍵（預設 `Ctrl+Down`）
- ✅ 系統托盤控制

## 🗄️ 典藏程式碼

以下程式碼已註解但保留在專案中：

### 後端 (`src-tauri/src/main.rs`)
- `create_sticky_note` - 創建便利貼視窗（API 保留）
- `update_sticky_note` - 更新便利貼資料（API 保留）
- `close_sticky_note` - 關閉便利貼視窗（API 保留）
- `delete_sticky_note` - 刪除便利貼（API 保留）
- `toggle_all_sticky_notes` - 切換所有便利貼（API 保留）
- 載入與恢復便利貼視窗邏輯（已註解）
- 托盤「新增便利貼視窗」事件處理（已註解）

### 前端 (`src/main.ts`)
- 便利貼視窗初始化邏輯（已刪除）
- 便利貼視窗配色設定（已刪除）
- 便利貼視窗儲存邏輯（已刪除）
- `tray-new-sticky-window` 事件監聽（已註解）

### 模組（完整保留）
- `src/stickyNotes.ts` - 便利貼 API 封裝模組

## 📝 文件更新

### CLAUDE.md
- 更新視窗管理架構說明
- 標註多視窗功能已停用
- 更新系統托盤功能說明

## 🐛 問題修復

### 修復新建便條功能
- **問題**: `createNewMemo` 未導入導致錯誤
- **修復**: 從 `./api` 正確導入 `createNewMemo`

### 清理測試資料
- 清空 `sticky_notes.json` 中累積的測試便利貼資料
- 防止啟動時出現多個空白視窗

## 🔄 未來計畫

多視窗功能將在以下改進後重新啟用：
- [ ] 改善便利貼視窗的生命週期管理
- [ ] 添加便利貼管理介面（列表、搜尋、批次操作）
- [ ] 優化便利貼資料儲存機制
- [ ] 添加便利貼模板功能

## 📊 技術細節

### 修改的檔案
- `src-tauri/src/main.rs` - 註解多視窗邏輯
- `src/main.ts` - 簡化初始化流程
- `CLAUDE.md` - 更新文件
- `package.json` - 更新版本號
- `src-tauri/Cargo.toml` - 更新版本號
- `src-tauri/tauri.conf.json` - 更新版本號

### 程式碼統計
- **新增**: 0 行
- **刪除**: ~100 行
- **註解**: ~80 行
- **修改**: ~20 行

---

**完整變更記錄**: https://github.com/lsyuan36/upmemo/compare/v0.1.1...v0.1.2
